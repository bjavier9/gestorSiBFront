<section class="max-w-2xl space-y-6">
  <ng-container *ngIf="company$ | async as company; else officesBreadcrumbFallback">
    <app-admin-breadcrumbs
      [items]="[
        { label: 'Companies', link: ['/admin/companies'] },
        { label: company.name, link: ['/admin/companies', company.id] },
        { label: 'Offices' }
      ]"
    ></app-admin-breadcrumbs>
  </ng-container>
  <ng-template #officesBreadcrumbFallback>
    <app-admin-breadcrumbs
      [items]="[{ label: 'Companies', link: ['/admin/companies'] }, { label: 'Offices' }]"
    ></app-admin-breadcrumbs>
  </ng-template>

  <article class="rounded-3xl border border-slate-200 bg-white p-8 shadow-sm">
    <header class="space-y-2">
      <h1 class="text-2xl font-semibold text-slate-900">Create office</h1>
      <p class="text-sm text-slate-500">
        <ng-container *ngIf="company$ | async as company; else genericOfficeDescription">
          Register a new office for {{ company.name }}.
        </ng-container>
      </p>
      <ng-template #genericOfficeDescription>
        <span class="text-sm text-slate-500">Register a new office for this company.</span>
      </ng-template>
    </header>

    <form class="mt-6 space-y-5" [formGroup]="form" (ngSubmit)="submit()">
      <label class="form-field">
        <span class="form-field__label">Office name</span>
        <input
          type="text"
          formControlName="name"
          autocomplete="organization"
          class="form-field__input"
        />
      </label>

      <label class="form-field">
        <span class="form-field__label">Address</span>
        <input
          type="text"
          formControlName="address"
          autocomplete="street-address"
          class="form-field__input"
        />
      </label>

      <label class="form-field">
        <span class="form-field__label">Phone</span>
        <input
          type="tel"
          formControlName="phone"
          autocomplete="tel"
          class="form-field__input"
        />
      </label>

      <label class="form-field">
        <span class="form-field__label">Currency</span>
        <input
          type="text"
          formControlName="currency"
          autocomplete="off"
          class="form-field__input"
        />
      </label>

      <div class="flex flex-wrap items-center justify-between gap-3">
        <a
          [routerLink]="['/admin/companies', companyId]"
          class="inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-sm font-semibold text-slate-700 transition hover:border-slate-300 hover:bg-slate-50"
        >
          ‚Üê Back to company overview
        </a>
        <button
          type="submit"
          [disabled]="isSubmitting()"
          [attr.aria-busy]="isSubmitting()"
          class="inline-flex items-center gap-2 rounded-full bg-sky-600 px-5 py-2 text-sm font-semibold text-white transition hover:bg-sky-700 disabled:cursor-not-allowed disabled:opacity-70"
        >
          <span aria-hidden="true">üìç</span>
          Create office
        </button>
      </div>
    </form>

    <p
      *ngIf="feedback() as currentFeedback"
      class="mt-6 text-sm font-medium"
      [ngClass]="{
        'text-emerald-600': currentFeedback.tone === 'success',
        'text-red-600': currentFeedback.tone === 'error'
      }"
    >
      {{ currentFeedback.text }}
    </p>
  </article>
</section>
