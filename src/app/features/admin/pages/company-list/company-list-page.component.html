<section class="space-y-6">
  <header class="space-y-2">
    <h1 class="text-2xl font-semibold text-slate-900">Brokerage companies</h1>
    <p class="text-sm text-slate-500">
      Select a company to manage users, offices, or its profile.
    </p>
  </header>

  <ng-container *ngIf="companies$ | async as companies; else loading">
    <div
      *ngIf="!companies.length"
      class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm"
    >
      <p class="text-sm text-slate-500">No companies available yet.</p>
    </div>

    <div class="grid gap-6 md:grid-cols-2 xl:grid-cols-3" *ngIf="companies.length">
      <article
        class="flex flex-col gap-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm transition-all duration-150 hover:-translate-y-1 hover:shadow-lg"
        *ngFor="let company of companies; trackBy: trackById"
      >
        <header class="flex items-start justify-between gap-3">
          <div>
            <p class="text-lg font-semibold text-slate-900">{{ company.name }}</p>
            <p class="text-xs font-medium uppercase tracking-wide text-slate-400">
              Tax id {{ company.taxId }}
            </p>
          </div>
          <div
            class="grid h-10 w-10 place-items-center rounded-xl bg-sky-100 text-lg text-sky-600"
            aria-hidden="true"
          >
            üè¢
          </div>
        </header>

        <div class="flex flex-wrap items-center gap-2">
          <span
            class="inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ring-1"
            [ngClass]="
              company.isActive
                ? 'bg-emerald-50 text-emerald-600 ring-emerald-100'
                : 'bg-slate-100 text-slate-500 ring-slate-200'
            "
          >
            {{ company.isActive ? 'Active' : 'Inactive' }}
          </span>
        </div>

        <dl class="space-y-3 text-sm text-slate-600">
          <div class="space-y-1">
            <dt class="font-semibold text-slate-500">Email</dt>
            <dd class="break-all text-slate-700">{{ company.email }}</dd>
          </div>
          <div class="space-y-1">
            <dt class="font-semibold text-slate-500">Phone</dt>
            <dd class="text-slate-700">{{ company.phone }}</dd>
          </div>
        </dl>

        <a
          [routerLink]="['/admin/companies', company.id]"
          class="inline-flex w-fit items-center justify-center gap-2 rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-600 transition hover:border-sky-300 hover:bg-sky-50"
        >
          <span aria-hidden="true">‚Üó</span>
          Open company
        </a>
      </article>
    </div>
  </ng-container>
</section>

<ng-template #loading>
  <div class="grid gap-6 md:grid-cols-2 xl:grid-cols-3">
    <article
      class="company-skeleton-card"
      *ngFor="let _ of skeletonItems"
      aria-hidden="true"
    >
      <div class="company-skeleton-card__header">
        <div class="skeleton skeleton--avatar"></div>
        <div class="company-skeleton-card__lines">
          <div class="skeleton skeleton--line skeleton--line-lg"></div>
          <div class="skeleton skeleton--line"></div>
        </div>
      </div>
      <div class="company-skeleton-card__body">
        <div class="skeleton skeleton--chip"></div>
        <div class="skeleton skeleton--line"></div>
        <div class="skeleton skeleton--line"></div>
      </div>
      <div class="skeleton skeleton--button"></div>
    </article>
  </div>
</ng-template>
